# Simply Localize

Система локализации для Unity, разработанная для упрощения управления переводами и обработки текста на разные языки в вашем проекте.

*Читать на других языках: [English](README.md).*

## Содержание

* [Возможности](#Возможности)
* [Пример](#Пример)
* [Установка](#Установка)
* [Использование](#Использование)
* [Настройка компонентов](#настройка-компонентов)

## Возможности

> [!NOTE]
> - **Удобное хранение**: все переводы хранятся в одном JSON файле и редакторе.
> - **Параметризация**: поддерживает форматированные тексты с параметрами.
> - **Пользовательский редактор**: поддерживается возможность добавлять ключи как через окно настроек, так и напрямую через компоненты локализации.
> - **Переключение языка во время выполнения**: изменение активного языка во время игры.
> - **Локализация изображений**: поддерживается локализация изображений.
> - **Автоматическая генерация ключей**: нет необходимости вручную добавлять их в код.

> [!NOTE]
> - **Локализация названия приложения**: пакет не предоставляет возможность локализации названия приложения. Рекомендуется использовать [Unity Localized App Title](https://github.com/yasirkula/UnityMobileLocalizedAppTitle.git) для этого.

## Пример
### Файл локализации

```json
{
  "en": {
    "Version": "Version {0}",
    "WelcomeMessage": "Welcome!",
    "Game/Inventory/Armor/Body": "Body Armor",
    "Game/Inventory/Armor/Head": "Head Armor",
    "Game/Inventory/Armor/Legs": "Leg Armor",
    "UI/MainMenu/Play": "Play",
    "UI/MainMenu/Quit": "Quit",
    "UI/MainMenu/Settings": "Settings"
  },
  "ja": {
    "Version": "バージョン {0}",
    "WelcomeMessage": "ようこそ！",
    "Game/Inventory/Armor/Body": "胴防具",
    "Game/Inventory/Armor/Head": "頭防具",
    "Game/Inventory/Armor/Legs": "脚防具",
    "UI/MainMenu/Play": "プレイ",
    "UI/MainMenu/Quit": "終了",
    "UI/MainMenu/Settings": "メインメニュー"
  },
  "ru": {
    "Version": "Версия {0}",
    "WelcomeMessage": "Добро пожаловать!",
    "Game/Inventory/Armor/Body": "Нагрудник",
    "Game/Inventory/Armor/Head": "Шлем",
    "Game/Inventory/Armor/Legs": "Поножи",
    "UI/MainMenu/Play": "Играть",
    "UI/MainMenu/Quit": "Выйти",
    "UI/MainMenu/Settings": "Настройки"
  }
}
```

> [!NOTE]
> В примерах находится полный пример файла локализации и настроенной сцены.


### Использование в редакторе

[![Unity-R6-H9o-Xq-EOh.png](https://i.postimg.cc/Z58xgj37/Unity-R6-H9o-Xq-EOh.png)](https://postimg.cc/rDp4R1fx)
[![Unity-b-M2doz-EGYT.png](https://i.postimg.cc/25C7fv7z/Unity-b-M2doz-EGYT.png)](https://postimg.cc/HrPywrNK)

### Использование в коде

#### Базовое применение
Для установки локализованного текста с параметром:

```csharp
// Установка текста по ключу локализации
VersionText.TranslateByKey("Version");
// Задание динамического параметра
VersionText.SetValue("1.0.1");

/* Результат:
 * en: "Version 1.0.1"
 * ru: "Версия 1.0.1"
 */
```

> [!NOTE]
> 1. Метод `TranslateByKey` не обязателен, если ключ задан в инспекторе Unity
> 2. Метод `TranslateByKey` может переопределять установленные ключи

#### Смена языка
```csharp
Localization.SetLocalization("ru");
```
Изменение применяется ко всем активным элементам интерфейса, использующим систему локализации.

## Установка

1. Загрузите и установите ассет по ссылке: `Window > Package Manager > Add package from git URL`
    ```
    https://github.com/RenKOFFF/SimplyLocalize.git
    ```
   
2. Если вы хотите локализовать название приложения на Android или IOS, установите сторонний пакет `Unity Localized App Title`. Вы можете добавить пакет аналогично пакету `SimplyLocalize` или использовать один из вариантов из оригинального репозитория.
    ```
    https://github.com/yasirkula/UnityMobileLocalizedAppTitle.git
    ```

## Использование

После установки в Unity появится новое меню:\
**`Window -> SimplyLocalize -> Localization Settings`**.

В этом окне вы можете:

- Добавить новые языки и шрифты для определенных языков.
- Создать и редактировать ключи.
- Установить переводы для каждого языка.
- Настроить поведение редактора:
  - Настройки преобразования текста в ключи: замена пробелов на слеш, на нижнее подчеркивание или не менять.
  - Включить/выключить логирование.

[![Unity-6o-AKl-J7x-Vb.gif](https://i.postimg.cc/2Sk7shwC/Unity-6o-AKl-J7x-Vb.gif)](https://postimg.cc/D8NGsWHN)

### Настройка компонентов

Добавьте один из компонентов локализации к UI-элементам:

#### **`LocalizationText`**
- **Назначение**: Для статического текста без динамических изменений
- **Использование**:
    1. Добавьте компонент к TextMeshPro или обычному тексту
    2. Выберите ключ локализации из списка

#### **`FormattableLocalizationText`**
- **Назначение**: Для динамического текста с параметрами (например "Здоровье: {0}/{1}")
- **Возможности**:
    - Поддержка параметров в стиле string.Format
    - Значения по умолчанию
- **Использование**:
    1. Добавьте компонент к текстовому объекту
    2. Введите ключ с плейсхолдерами (например "STATS_HEALTH_{0}_{1}")
    3. Установите параметры через код: `.SetValue(100, 200)`
    4. Установите значение по умолчанию в редакторе (опционально)

> [!IMPORTANT]
> - текст перевода обязан содержать фрагмент с параметром {n} (например "STATS_HEALTH_{0}_{1}")

#### **`LocalizationImage`**
- **Назначение**: Для локализованных изображений
- **Использование**:
    1. Добавьте компонент к Image
    2. Добавьте спрайт-ключ из списка ключей в окне редактора из вкладки "Sprites"

### Изменение языка и установка языка по умолчанию

Вызовите метод для установки языка:

```csharp
Localization.SetLocalization("ru"); // Установить русский язык.
```

> [!TIP]
> - Вы можете установить язык по умолчанию в окнах настроек локализации и при необходимости изменить его во время игры.
> - Установка языка по умолчанию не обязательна. Главное - установить язык до начала выполнения всех скриптов локализации.

### Альтернативный способ добавления ключей

Ключи также можно добавлять напрямую через текстовые компоненты. 

[![Unity-srfu-Fb-Dd-Z7.png](https://i.postimg.cc/bvQ6tDMf/Unity-srfu-Fb-Dd-Z7.png)](https://postimg.cc/7CZMv6wK)